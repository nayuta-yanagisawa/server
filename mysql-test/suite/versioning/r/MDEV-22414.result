#
# MDEV-22414 UPDATE or DELETE FOR PORTION OF increments the value of
# auto-increment column instead of copying the old one
#
create table t1 (a int auto_increment, b char(16), s date, e date, period for se(s,e), primary key(a,s));
insert into t1 values (1,'new','2019-01-01','2020-01-01');
update t1 for portion of se from '2019-07-01' to '2020-07-01' set b = 'updated' where a = 1;
select * from t1;
a	b	s	e
1	updated	2019-07-01	2020-01-01
2	new	2019-01-01	2019-07-01
delete from t1 for portion of se from '2019-09-01' to '2019-10-01' where a = 1;
select * from t1;
a	b	s	e
1	updated	2019-07-01	2019-09-01
2	new	2019-01-01	2019-07-01
1	updated	2019-10-01	2020-01-01
drop table t1;
